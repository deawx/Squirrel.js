!function(e,t,r){function i(r,i,n,a){var s=e.JSON.parse(r.getItem(i));if(null===s&&(s={}),u(a)||null===a)return u(s[n])?null:s[n];var o={};return o[n]=a,t.extend(s,o),r.setItem(i,e.JSON.stringify(s)),a}function n(e,t){e.removeItem(t)}function a(e){return"boolean"===t.type(e)}function s(e){return"object"===t.type(e)}function o(e){return"string"===t.type(e)&&e.trim().length>0}function u(e){return e===r}function l(e,t){return o(e)?e:t}t.fn.extend({squirrel:function(r,g){g=t.extend({},t.fn.squirrel.options,g),g.clearOnSubmit=g.clear_on_submit,g.storageMethod=g.storage_method,g.storageKey=g.storage_key,g.storageKeyPrefix=g.storage_key_prefix;var h=null;if(o(g.storageMethod)?h="LOCAL"===g.storageMethod.toUpperCase()?e.localStorage:e.sessionStorage:null!==g.storageMethod&&s(g.storageMethod)&&(h=g.storageMethod),null===h||!(s(h)&&"getItem"in h&&"removeItem"in h&&"setItem"in h))return this;r=o(r)&&f.ACTION.test(r)?r.toUpperCase():"START";var d="input[type!=file]:not(.squirrel-ignore), select:not(.squirrel-ignore), textarea:not(.squirrel-ignore)",p="button[type=reset], input[type=reset]",m="input[id], input[name], select[id], select[name], textarea[id], textarea[name]";return g.storageKey=l(g.storageKey,"squirrel"),g.storageKeyPrefix=l(g.storageKeyPrefix,""),this.each(function(){var e=t(this),s=e.attr("data-squirrel"),l=g.storageKeyPrefix+(o(s)?s:g.storageKey);switch(r){case"CLEAR":case"REMOVE":n(h,l);break;case"OFF":case"STOP":e.find(d).off(c.CHANGE),e.find(p).off(c.CLICK),e.off(c.SUBMIT);break;default:e.find("*").filter(m).each(function(){var r=t(this),n=r.attr("name");if(u(n)&&(n=r.attr("id"),u(n)))return e;var a=null;switch(this.tagName){case"INPUT":case"TEXTAREA":var s=r.attr("type");if("checkbox"===s){var c=r.attr("value");o(c)||(c=""),a=i(h,l,n+c),null!==a&&a!==this.checked&&(this.checked=a===!0,r.trigger("change"))}else"radio"===s?(a=i(h,l,n),null!==a&&a!==this.checked&&(this.checked=r.val()===a,r.trigger("change"))):(a=i(h,l,n),null!==a&&!r.is("[readonly]")&&r.is(":enabled")&&r.val()!==a&&r.val(a).trigger("change"));break;case"SELECT":a=i(h,l,n),null!==a&&t.each(t.isArray(a)?a:[a],function(e,i){r.find("option").filter(function(){var e=t(this);return e.val()===i||e.html()===i}).prop("selected",!0).trigger("change")})}}),e.find(d).on(c.CHANGE,function(){var e=t(this),r=e.attr("name");if(!u(r)||(r=e.attr("id"),!u(r))){var n=e.attr("value"),a="checkbox"!==this.type||u(n)?r:r+n;i(h,l,a,"checkbox"===this.type?e.prop("checked"):e.val())}}),e.find(p).on(c.CLICK,function(){n(h,l)}),e.on(c.SUBMIT,function(){(!a(g.clearOnSubmit)||g.clearOnSubmit)&&n(h,l)})}})}});var c={CLICK:"click.squirrel.js",CHANGE:"blur.squirrel.js keyup.squirrel.js change.squirrel.js",SUBMIT:"submit.squirrel.js"},f={ACTION:/^(?:CLEAR|REMOVE|OFF|STOP)$/i};t.fn.squirrel.options={clear_on_submit:!0,storage_method:"session",storage_key:"squirrel",storage_key_prefix:""},t(function(){t("form.squirrel, form[data-squirrel]").squirrel()})}(this,this.jQuery);
