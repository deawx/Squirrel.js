!function(a,b,c,d){a.fn.extend({squirrel:function(c,d){d=a.extend({},a.fn.squirrel.options,d);var l=null;if(i(d.storage_method)?l="LOCAL"===d.storage_method.toUpperCase()?b.localStorage:b.sessionStorage:null!==d.storage_method&&h(d.storage_method)&&(l=d.storage_method),null===l||!(h(l)&&"getItem"in l&&"removeItem"in l&&"setItem"in l))return this;c=i(c)&&/^(?:CLEAR|REMOVE|OFF|STOP)$/i.test(c)?c.toUpperCase():"START";var m="input[type!=file]:not(.squirrel-ignore), select:not(.squirrel-ignore), textarea:not(.squirrel-ignore)",n="button[type=reset], input[type=reset]",o="input[id], input[name], select[id], select[name], textarea[id], textarea[name]";d.storage_key=k(d.storage_key,"squirrel"),d.storage_key_prefix=k(d.storage_key_prefix,"");var p=this;return this.each(function(){var b=a(this),h=b.attr("data-squirrel"),k=d.storage_key_prefix+(h?h:d.storage_key);switch(c){case"CLEAR":case"REMOVE":f(l,k);break;case"OFF":case"STOP":b.find(m).off("blur.squirrel.js keyup.squirrel.js change.squirrel.js"),b.find(n).off("click.squirrel.js"),b.off("submit.squirrel.js");break;default:b.find("*").filter(o).each(function(){var b=a(this),c=b.attr("name"),d=null;if(j(c)&&(c=b.attr("id"),j(c)))return p;switch(this.tagName){case"INPUT":case"TEXTAREA":var f=b.attr("type");if("checkbox"===f){var g=b.attr("value");i(g)||(g=""),d=e(l,k,c+g),null!==d&&d!==this.checked&&(this.checked=d===!0,b.trigger("change"))}else"radio"===f?(d=e(l,k,c),null!==d&&d!==this.checked&&(this.checked=b.val()===d,b.trigger("change"))):(d=e(l,k,c),null!==d&&!b.is("[readonly]")&&b.is(":enabled")&&b.val()!==d&&b.val(d).trigger("change"));break;case"SELECT":d=e(l,k,c),null!==d&&a.each(a.isArray(d)?d:[d],function(c,d){b.find("option").filter(function(){var b=a(this);return b.val()===d||b.html()===d}).prop("selected",!0).trigger("change")})}}),b.find(m).on("blur.squirrel.js keyup.squirrel.js change.squirrel.js",function(){var b=a(this),c=b.attr("name");if(!j(c)||(c=b.attr("id"),!j(c))){var d=b.attr("value"),f="checkbox"!==this.type||j(d)?c:c+d;e(l,k,f,"checkbox"===this.type?b.prop("checked"):b.val())}}),b.find(n).on("click.squirrel.js",function(){f(l,k)}),b.on("submit.squirrel.js",function(){(!g(d.clear_on_submit)||d.clear_on_submit)&&f(l,k)})}})}});var e=function(b,c,d,e){var f=JSON.parse(b.getItem(c));if(null===f&&(f={}),j(e)||null===e)return j(f[d])?null:f[d];var g={};return g[d]=e,a.extend(f,g),b.setItem(c,JSON.stringify(f)),e},f=function(a,b){a.removeItem(b)},g=function(b){return"boolean"===a.type(b)},h=function(b){return"object"===a.type(b)},i=function(b){return"string"===a.type(b)&&b.trim().length>0},j=function(a){return a===d},k=function(a,b){return i(a)?a:b};a.fn.squirrel.options={clear_on_submit:!0,storage_method:"session",storage_key:"squirrel",storage_key_prefix:""},a(function(){a("form.squirrel, form[data-squirrel]").squirrel()})}(jQuery,window,document);